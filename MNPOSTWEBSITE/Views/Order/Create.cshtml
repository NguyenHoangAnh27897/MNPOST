@using MNPOSTWEBSITE.Models;
@{
    ViewBag.Title = "Create";
    Layout = "~/Views/Shared/_LayoutAccount.cshtml";
    List<Province> lstProvince = new List<Province>();
    List<District> lstDistrict = new List<District>();
    List<Ward> lstWard = new List<Ward>();
    Province pro = new Province();
    District dt = new District();
    Ward w = new Ward();
    MNPOSTWEBSITE.Controllers.HomeController home = new MNPOSTWEBSITE.Controllers.HomeController();
    List<string> lstname = home.getProvince(Session["token"].ToString()).Result;
    List<string> lstid = home.getProvinceID(Session["token"].ToString()).Result;
    List<string> lstdname = home.getDistrict(Session["token"].ToString()).Result;
    List<string> lstdid = home.getDistrictID(Session["token"].ToString()).Result;
    List<string> lstwname = home.getWard(Session["token"].ToString()).Result;
    List<string> lstwid = home.getWardID(Session["token"].ToString()).Result;
    for (int i = 0; i < lstname.Count; i++)
    {
        pro = new Province();
        pro.ProvinceName = lstname[i];
        pro.ProvinceID = lstid[i];
        lstProvince.Add(pro);
    }
    for (int i = 0; i < lstdname.Count; i++)
    {
        dt = new District();
        dt.DistrictName = lstdname[i];
        dt.DistrictID = lstdid[i];
        lstDistrict.Add(dt);
    }
    for (int i = 0; i < lstwname.Count; i++)
    {
        w = new Ward();
        w.WardName = lstwname[i];
        w.WardID = lstwid[i];
        lstWard.Add(w);
    }
}

  <!--main content start-->
<section id="main-content">
    <section class="wrapper">
        <h3><i class="fa fa-angle-right"></i> Tạo đơn hàng</h3>

        <!-- BASIC FORM ELELEMNTS -->
        <div class="row mt">
            <div class="col-lg-12">
                <div class="form-panel">
                    <form class="form-horizontal style-form" method="post" action="/order/create">
                        <div class="row">
                            <div class="col-lg-5" style="margin-left:50px;">
                                <h4 class="mb"><i class="fa fa-angle-right"></i> Người gửi</h4>
                                <div class="form-group">
                                    <label class="col-sm-2 col-sm-2 control-label">Họ và tên</label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control round-form" name="SenderName" placeholder="Nhập họ và tên..." value="@ViewBag.SenderName">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-2 col-sm-2 control-label">Số điện thoại</label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control round-form" name="SenderPhone" placeholder="Người số điện thoại..." value="@ViewBag.SenderPhone">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-2 col-sm-2 control-label">Địa chỉ</label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control round-form" name="SenderAddress" placeholder="Nhập địa chỉ..." value="@ViewBag.SenderAddress">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-2 col-sm-2 control-label">Phường</label>
                                    <div class="col-sm-10">
                                        <select class="form-control select2 no-radius" name="SenderWardID">
                                            <option value="">Chọn phường</option>
                                            @foreach (var item in lstWard)
                                            {
                                                <option value="@item.WardID">@item.WardName</option>
                                            }
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-2 col-sm-2 control-label">Quận/huyện</label>
                                    <div class="col-sm-10">
                                        <select class="form-control select2 no-radius" name="SenderDistrictID">
                                            <option value="">Chọn quận/huyện</option>
                                            @foreach (var item in lstDistrict)
                                            {
                                                <option value="@item.DistrictID">@item.DistrictName</option>
                                            }
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-2 col-sm-2 control-label">Thành phố</label>
                                    <div class="col-sm-10">
                                        <select class="form-control select2 no-radius" name="SenderProvinceID">
                                            <option value="">Chọn thành phố</option>
                                            @foreach (var item in lstProvince)
                                            {
                                                <option value="@item.ProvinceID">@item.ProvinceName</option>
                                            }
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-2 col-sm-2 control-label">Trọng lượng</label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control round-form" name="Weight" placeholder="Nhập trọng lượng...">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-2 col-sm-2 control-label">Số lượng</label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control round-form" name="Quantity" placeholder="Nhập số lượng...">
                                    </div>
                                </div>
                                <button type="submit" class="btn btn-round btn-success">Gói hàng</button>
                            </div>
                            <div class="col-lg-5" style="float:right; margin-right:100px;">
                                <h4 class="mb"><i class="fa fa-angle-right"></i> Người nhận</h4>
                                <div class="form-group">
                                    <label class="col-sm-2 col-sm-2 control-label">Họ và tên</label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control round-form" name="RecieverName" placeholder="Nhập họ và tên..." value="@ViewBag.RecieverName">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-2 col-sm-2 control-label">Số điện thoại</label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control round-form" name="RecieverPhone" placeholder="Người số điện thoại..." value="@ViewBag.RecieverPhone">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-2 col-sm-2 control-label">Địa chỉ</label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control round-form" name="RecieverAddress" placeholder="Nhập địa chỉ..." value="@ViewBag.RecieverAddress">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-2 col-sm-2 control-label">Phường</label>
                                    <div class="col-sm-10">
                                        <select class="form-control select2 no-radius" name="RecieverWardID">
                                            <option value="">Chọn phường</option>
                                            @foreach (var item in lstWard)
                                            {
                                                <option value="@item.WardID">@item.WardName</option>
                                            }
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-2 col-sm-2 control-label">Quận/huyện</label>
                                    <div class="col-sm-10">
                                        <select class="form-control select2 no-radius" name="RecieverDistrictID">
                                            <option value="">Chọn quận/huyện</option>
                                            @foreach (var item in lstDistrict)
                                            {
                                                <option value="@item.DistrictID">@item.DistrictName</option>
                                            }
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-2 col-sm-2 control-label">Thành phố</label>
                                    <div class="col-sm-10">
                                        <select class="form-control select2 no-radius" name="RecieverProvinceID">
                                            <option value="">Chọn thành phố</option>
                                            @foreach (var item in lstProvince)
                                            {
                                                <option value="@item.ProvinceID">@item.ProvinceName</option>
                                            }
                                        </select>
                                    </div>
                                </div>
                            </div>  
                        </div>
                    </form>
                </div>
            </div><!-- col-lg-12-->
        </div><!-- /row -->
    </section>
</section><!-- /MAIN CONTENT -->
<!--main content end-->
	<!--custom tagsinput-->
<script src="/Content/js/jquery.tagsinput.js"></script>
<script type="text/javascript" src="/Content/js/bootstrap-inputmask/bootstrap-inputmask.min.js"></script>

<script>
    var placeSearch, autocomplete;

    function initAutocomplete() {
        // Create the autocomplete object, restricting the search to geographical
        // location types.
        autocomplete = new google.maps.places.Autocomplete(
            (document.getElementById('autocomplete')),
            { types: ['geocode'] });

        // When the user selects an address from the dropdown, populate the address
        // fields in the form.
        autocomplete.addListener('place_changed', fillInAddress);
    }

    function fillInAddress() {
        // Get the place details from the autocomplete object.
        var place = autocomplete.getPlace();

        for (var component in componentForm) {
            document.getElementById(component).value = '';
            document.getElementById(component).disabled = false;
        }

        // Get each component of the address from the place details
        // and fill the corresponding field on the form.
        for (var i = 0; i < place.address_components.length; i++) {
            var addressType = place.address_components[i].types[0];
            if (componentForm[addressType]) {
                var val = place.address_components[i][componentForm[addressType]];
                document.getElementById(addressType).value = val;
            }
        }
    }

    // Bias the autocomplete object to the user's geographical location,
    // as supplied by the browser's 'navigator.geolocation' object.
    function geolocate() {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(function (position) {
                var geolocation = {
                    lat: position.coords.latitude,
                    lng: position.coords.longitude
                };
                var circle = new google.maps.Circle({
                    center: geolocation,
                    radius: position.coords.accuracy
                });
                autocomplete.setBounds(circle.getBounds());
            });
        }
    }
</script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCkUOdZ5y7hMm0yrcCQoCvLwzdM6M8s5qk&libraries=places&callback=initAutocomplete"
        async defer></script>

